Feature: Block Transform


Scenario: Transform block data to python dict
Given a dictionary
And property "number" int is "2"
And property "hash" HexBytes is "0x23cddac75d68d0c2bd78596fdfded22183ec6e3c42f36c95f0d72e097a0e37fa"
And property "parentHash" HexBytes is "0x43f2d9e3a4db3b89722f1f3571ecaca771e1562235dec9b56bcea82acb2ada0d"
And property "mixHash" HexBytes is "0x0000000000000000000000000000000000000000000000000000000000000000"
And property "nonce" HexBytes is "0x0000000000000000"
And property "sha3Uncles" HexBytes is "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347"
And property "logsBloom" HexBytes is "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
And property "transactionsRoot" HexBytes is "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"
And property "stateRoot" HexBytes is "0x8f223a4a96c7c18ef91cad5ce69025e38b003bf366c0fa6e94a6b446b43ad3a2"
And property "receiptsRoot" HexBytes is "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"
And property "miner" string is "0x0000000000000000000000000000000000000000"
And property "difficulty" int is "0"
And property "totalDifficulty" int is "0"
And property "extraData" HexBytes is "0x"
And property "size" int is "1000"
And property "gasLimit" int is "6721975"
And property "gasUsed" int is "21000"
And property "timestamp" int is "1534253339"
And property "uncles" array is empty
And property "transactions" array contains
    |                   hash                                             |
    | 0x97c068992b6bf1930eb854e7c5c67c2720d7df4b4878822ffcb0792c6333d59a |
When the data is passed to the transformBlock function
Then the returned data is similar to:
"""
{
    "number": 2, 
    "hash": "0x23cddac75d68d0c2bd78596fdfded22183ec6e3c42f36c95f0d72e097a0e37fa", 
    "parent_hash": "0x43f2d9e3a4db3b89722f1f3571ecaca771e1562235dec9b56bcea82acb2ada0d", 
    "mix_hash": "0x0000000000000000000000000000000000000000000000000000000000000000", 
    "nonce": "0x0000000000000000", 
    "sha3_uncles": "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347", 
    "logs_bloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", 
    "transactions_root": "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421", 
    "state_root": "0x8f223a4a96c7c18ef91cad5ce69025e38b003bf366c0fa6e94a6b446b43ad3a2", 
    "receipts_root": "0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",
    "miner": "0x0000000000000000000000000000000000000000", 
    "difficulty": 0, 
    "total_difficulty": 0, 
    "extra_data": "0x", 
    "size": 1000, 
    "gas_limit": 6721975, 
    "gas_used": 21000,
    "timestamp": 1534253339, 
    "uncles": [], 
    "transactions": ["0x97c068992b6bf1930eb854e7c5c67c2720d7df4b4878822ffcb0792c6333d59a"]
}
"""

Scenario: Transform a transaction block data to python dict
Given the transaction block data similar to
"""
{
    "hash": "0x9459c8a1caae335fb5f2018a54ae7db0d8d9a0066b0df495d7778321f40a93e7", 
    "nonce": 1, 
    "blockHash": "0xf475f7209f0c6349d621ce1a2c5589be65990d15987baa7489df41a86eff9828", 
    "blockNumber": 5, 
    "transactionIndex": 0, 
    "from": "0x4a78bA434908DDd69F55B804f7A79eB4CB4A3831", 
    "to": "0xaA431B5228c0875747f3076185959f004a9699aC", 
    "value": 1234567, 
    "gas": 121000, 
    "gasPrice": 1, 
    "input": "0x0", 
    "v": 27, 
    "r": "0x4edcd013e60c2969cdd8cb01fb1ab7356dbd42fb172a3cf4ed1f4567508e7369", 
    "s": "0x2ca92ec0cb70be79077891b81025f207f7a25ce651ab35accbd3fed8c7e70041"
}
"""
When the data is passed to the transformTransaction function
Then the returned data is similar to:
"""
{
    "to": "0xaA431B5228c0875747f3076185959f004a9699aC",
    "from": "0x4a78bA434908DDd69F55B804f7A79eB4CB4A3831",
    "gas": 121000,
    "value": 1234567,
    "gas_price": 1,
    "block_number": 5
}
"""

